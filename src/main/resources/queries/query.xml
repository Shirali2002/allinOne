<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE properties SYSTEM "http://java.sun.com/dtd/properties.dtd">
<properties>
    <comment>All In One Queries</comment>

    <entry key="allinone.query.saveCurrency">
        <![CDATA[
            INSERT
              INTO tb_currency
                   (currency_code,
                   name)
            VALUES (:code,
                   :name);
        ]]>
    </entry>

    <entry key="allinone.query.saveBanType">
        <![CDATA[
            INSERT
              INTO tb_ban_type
                   (ban_type_code,
                   name)
            VALUES (:code,
                   :name);
        ]]>
    </entry>

    <entry key="allinone.query.saveBrand">
        <![CDATA[
            INSERT
              INTO tb_brand
                   (brand_code,
                   name)
            VALUES (:code,
                   :name);
        ]]>
    </entry>

    <entry key="allinone.query.saveCity">
        <![CDATA[
            INSERT
              INTO tb_city
                   (city_code,
                   name)
            VALUES (:code,
                   :name);
        ]]>
    </entry>

    <entry key="allinone.query.saveColour">
        <![CDATA[
            INSERT
              INTO tb_colour
                   (colour_code,
                   name)
            VALUES (:code,
                   :name);
        ]]>
    </entry>

    <entry key="allinone.query.saveDestMeasure">
        <![CDATA[
            INSERT
              INTO tb_dest_measure
                   (dest_code,
                   name)
            VALUES (:code,
                   :name);
        ]]>
    </entry>

    <entry key="allinone.query.saveFuelType">
        <![CDATA[
            INSERT
              INTO tb_fuel_type
                   (fuel_type_code,
                   name)
            VALUES (:code,
                   :name);
        ]]>
    </entry>

    <entry key="allinone.query.saveGearBoxType">
        <![CDATA[
            INSERT
              INTO tb_gear_box_type
                   (gear_box_code,
                   name)
            VALUES (:code,
                   :name);
        ]]>
    </entry>

    <entry key="allinone.query.saveGearType">
        <![CDATA[
            INSERT
              INTO tb_gear_type
                   (gear_type_code,
                   name)
            VALUES (:code,
                   :name);
        ]]>
    </entry>

    <entry key="allinone.query.saveModel">
        <![CDATA[
            INSERT
              INTO tb_model
                   (model_code,
                   name,
                   brand_id)
            VALUES (:model,
                   :name,
                   :brandId);
        ]]>
    </entry>

    <entry key="allinone.query.saveAds">
        <![CDATA[
            INSERT INTO tb_adss(
                            ads_link,
                            image_link,
                            destination,
                            engine_horse_power,
                            engine_power,
                            number_of_seats,
                            price,
                            ttl,
                            used,
                            prod_year,
                            ban_type_id,
                            city_id,
                            colour_id,
                            currency_id,
                            dest_measure_id,
                            fuel_type_id,
                            gear_box_type_id,
                            gear_type_id,
                            model_id)
                 VALUES (:linkAds,
                        :imageLink,
                        :destination,
                        :horsePower,
                        :enginePower,
                        :numberOfSeats,
                        :price,
                        :ttl,
                        :used,
                        :year,
                        (SELECT ban_type_code
                           FROM tb_ban_type
                          WHERE name = :banType),
                        (SELECT city_code
                           FROM tb_city
                          WHERE name = :city),
                        (SELECT colour_code
                           FROM tb_colour
                          WHERE name = :colour),
                        (SELECT currency_code
                           FROM tb_currency
                          WHERE name = :currency),
                        (SELECT dest_code
                           FROM tb_dest_measure
                          WHERE name = :destMeasure),
                        (SELECT fuel_type_code
                           FROM tb_fuel_type
                          WHERE name = :fuelType),
                        (SELECT gear_box_code
                           FROM tb_gear_box_type
                          WHERE name = :gearBoxType),
                        (SELECT gear_type_code
                           FROM tb_gear_type
                          WHERE name = :gearType),
                        (SELECT m.model_code
                           FROM tb_model m
                      LEFT JOIN tb_brand b
                             ON m.brand_id = b.brand_code
                          WHERE m.name = :model
                            AND b.name = :brand));

        ]]>
    </entry>

    <entry key="allinone.query.saveUser">
        <![CDATA[
            INSERT
              INTO tb_user
                   (email,
                   enabled,
                   name,
                   otp,
                   password,
                   reset_enabled,
                   reset_password_token,
                   surname)
            VALUES (:email,
                   :enabled,
                   :name,
                   :otp,
                   :password,
                   :resetEnabled,
                   :resetToken,
                   :surname);
        ]]>
    </entry>

    <entry key="allinone.query.findAllAds">
        <![CDATA[
            SELECT a.ads_link           as ads_link,
                   a.image_link         as image_link,
                   a.destination        as destination,
                   a.engine_horse_power as engine_horse_power,
                   a.engine_power       as engine_power,
                   a.number_of_seats    as number_of_seats,
                   a.price              as price,
                   a.ttl                as ttl,
                   a.used               as used,
                   a.prod_year          as year,
                   bt.name              as ban_type,
                   ci.name              as city,
                   co.name              as colour,
                   cu.name              as currency,
                   dm.name              as destination_measure,
                   ft.name              as fuel_type,
                   gbt.name             as gear_box_type,
                   gt.name              as gear_type,
                   m.name               as model,
                   b.name               as brand
              FROM tb_adss a
         LEFT JOIN tb_ban_type bt
                ON a.ban_type_id = bt.ban_type_code
         LEFT JOIN tb_city ci
                ON a.city_id = ci.city_code
         LEFT JOIN tb_colour co
                ON a.colour_id = co.colour_code
         LEFT JOIN tb_currency cu
                ON a.currency_id = cu.currency_code
         LEFT JOIN tb_dest_measure dm
                ON a.dest_measure_id = dm.dest_code
         LEFT JOIN tb_fuel_type ft
                ON a.fuel_type_id = ft.fuel_type_code
         LEFT JOIN tb_gear_box_type gbt
                ON a.gear_box_type_id = gbt.gear_box_code
         LEFT JOIN tb_gear_type gt
                ON a.gear_type_id = gt.gear_type_code
         LEFT JOIN tb_model m
                ON a.model_id = m.model_code
         LEFT JOIN tb_brand b
                ON m.brand_id = b.brand_code;
        ]]>
    </entry>

    <entry key="allinone.query.findAllAdsPageByPage">
        <![CDATA[
            SELECT a.ads_link           as ads_link,
                   a.image_link         as image_link,
                   a.destination        as destination,
                   a.engine_horse_power as engine_horse_power,
                   a.engine_power       as engine_power,
                   a.number_of_seats    as number_of_seats,
                   a.price              as price,
                   a.ttl                as ttl,
                   a.used               as used,
                   a.prod_year          as year,
                   bt.name              as ban_type,
                   ci.name              as city,
                   co.name              as colour,
                   cu.name              as currency,
                   dm.name              as destination_measure,
                   ft.name              as fuel_type,
                   gbt.name             as gear_box_type,
                   gt.name              as gear_type,
                   m.name               as model,
                   b.name               as brand
              FROM tb_adss a
         LEFT JOIN tb_ban_type bt
                ON a.ban_type_id = bt.ban_type_code
         LEFT JOIN tb_city ci
                ON a.city_id = ci.city_code
         LEFT JOIN tb_colour co
                ON a.colour_id = co.colour_code
         LEFT JOIN tb_currency cu
                ON a.currency_id = cu.currency_code
         LEFT JOIN tb_dest_measure dm
                ON a.dest_measure_id = dm.dest_code
         LEFT JOIN tb_fuel_type ft
                ON a.fuel_type_id = ft.fuel_type_code
         LEFT JOIN tb_gear_box_type gbt
                ON a.gear_box_type_id = gbt.gear_box_code
         LEFT JOIN tb_gear_type gt
                ON a.gear_type_id = gt.gear_type_code
         LEFT JOIN tb_model m
                ON a.model_id = m.model_code
         LEFT JOIN tb_brand b
                ON m.brand_id = b.brand_code
          ORDER BY ttl DESC
             LIMIT :limit
            OFFSET :from;
        ]]>
    </entry>

    <entry key="allinone.query.findCountOfAdsByAdsLink">
        <![CDATA[
            SELECT COUNT(a.ads_link)
              FROM tb_adss a
             WHERE a.ads_link = :adsLink;
        ]]>
    </entry>

    <entry key="allinone.query.findAllBanType">
        <![CDATA[
            SELECT *
              FROM tb_ban_type;
        ]]>
    </entry>

    <entry key="allinone.query.findAllBrand">
        <![CDATA[
            SELECT *
              FROM tb_brand;
        ]]>
    </entry>

    <entry key="allinone.query.findAllCity">
        <![CDATA[
            SELECT *
              FROM tb_city;
        ]]>
    </entry>

    <entry key="allinone.query.findAllColour">
        <![CDATA[
            SELECT *
              FROM tb_colour;
        ]]>
    </entry>

    <entry key="allinone.query.findAllCurrency">
        <![CDATA[
            SELECT *
              FROM tb_currency;
        ]]>
    </entry>

    <entry key="allinone.query.findAllDestMeasure">
        <![CDATA[
            SELECT *
              FROM tb_dest_measure;
        ]]>
    </entry>

    <entry key="allinone.query.findAllFuelType">
        <![CDATA[
            SELECT *
              FROM tb_fuel_type;
        ]]>
    </entry>

    <entry key="allinone.query.findAllGearBoxType">
        <![CDATA[
            SELECT *
              FROM tb_gear_box_type;
        ]]>
    </entry>

    <entry key="allinone.query.findAllGearType">
        <![CDATA[
            SELECT *
              FROM tb_gear_type;
        ]]>
    </entry>

    <entry key="allinone.query.findAllModel">
        <![CDATA[
            SELECT id,
                   model_code,
                   name,
                   brand_id as brand_code
              FROM tb_model;
        ]]>
    </entry>

    <entry key="allinone.query.findAllModelByBrandCode">
        <![CDATA[
            SELECT id,
                   model_code,
                   name,
                   brand_id as brand_code
              FROM tb_model
             WHERE brand_id = :brandCode;
        ]]>
    </entry>

    <entry key="allinone.query.findAllUser">
        <![CDATA[
            SELECT email,
                   enabled,
                   name,
                   otp as otp_code,
                   password,
                   reset_enabled,
                   reset_password_token,
                   surname
              FROM tb_user;
        ]]>
    </entry>

    <entry key="allinone.query.findUserByEmail">
        <![CDATA[
            SELECT email,
                   enabled,
                   name,
                   otp as otp_code,
                   password,
                   reset_enabled,
                   reset_password_token,
                   surname
              FROM tb_user
             WHERE email = :email;
        ]]>
    </entry>

    <entry key="allinone.query.findUserByResetPasswordToken">
        <![CDATA[
            SELECT email,
                   enabled,
                   name,
                   otp as otp_code,
                   password,
                   reset_enabled,
                   reset_password_token,
                   surname
              FROM tb_user
             WHERE reset_password_token = :resetPasswordToken;
        ]]>
    </entry>

    <entry key="allinone.query.updateUserByEmail">
        <![CDATA[
            UPDATE tb_user
               SET name = :name,
                   enabled = :enabled,
                   otp = :otp,
                   password = :password,
                   reset_enabled = :resetEnabled,
                   reset_password_token = :resetToken,
                   surname = :surname
             WHERE email = :email;
        ]]>
    </entry>

</properties>